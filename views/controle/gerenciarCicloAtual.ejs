<div class="row">
	<div class="col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
		<form id="form" class="panel panel-default" action="#">
			<div class="panel-heading">Informações do Ciclo Atual</div>
			<div class="panel-body pb-0">
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label for="cicloAtual">Ciclo</label>
							<select size="1" id="cicloAtual" name="cicloAtual" class="form-control">
								<option value="1" <%- ((infoAtual.cicloAtual === 1) ? 'selected="selected"' : '') %>>1</option>
								<option value="2" <%- ((infoAtual.cicloAtual === 2) ? 'selected="selected"' : '') %>>2</option>
							</select>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label for="mesInicialCiclo">Mês Inicial</label>
							<select size="1" id="mesInicialCiclo" name="mesInicialCiclo" class="form-control">
								<option value="1" <%- ((infoAtual.mesInicialCiclo === 1) ? 'selected="selected"' : '') %>>Janeiro</option>
								<option value="2" <%- ((infoAtual.mesInicialCiclo === 2) ? 'selected="selected"' : '') %>>Fevereiro</option>
								<option value="3" <%- ((infoAtual.mesInicialCiclo === 3) ? 'selected="selected"' : '') %>>Março</option>
								<option value="4" <%- ((infoAtual.mesInicialCiclo === 4) ? 'selected="selected"' : '') %>>Abril</option>
								<option value="5" <%- ((infoAtual.mesInicialCiclo === 5) ? 'selected="selected"' : '') %>>Maio</option>
								<option value="6" <%- ((infoAtual.mesInicialCiclo === 6) ? 'selected="selected"' : '') %>>Junho</option>
								<option value="7" <%- ((infoAtual.mesInicialCiclo === 7) ? 'selected="selected"' : '') %>>Julho</option>
								<option value="8" <%- ((infoAtual.mesInicialCiclo === 8) ? 'selected="selected"' : '') %>>Agosto</option>
								<option value="9" <%- ((infoAtual.mesInicialCiclo === 9) ? 'selected="selected"' : '') %>>Setembro</option>
								<option value="10" <%- ((infoAtual.mesInicialCiclo === 10) ? 'selected="selected"' : '') %>>Outubro</option>
								<option value="11" <%- ((infoAtual.mesInicialCiclo === 11) ? 'selected="selected"' : '') %>>Novembro</option>
								<option value="12" <%- ((infoAtual.mesInicialCiclo === 12) ? 'selected="selected"' : '') %>>Dezembro</option>
							</select>
						</div>
					</div>

					<div class="col-xs-6">
						<div class="form-group">
							<label for="anoInicialCiclo">Ano Inicial</label>
							<input type="number" id="anoInicialCiclo" name="anoInicialCiclo" class="form-control" value="<%- infoAtual.anoInicialCiclo %>" />
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label for="mesFinalCiclo">Mês Final</label>
							<select size="1" id="mesFinalCiclo" name="mesFinalCiclo" class="form-control">
								<option value="1" <%- ((infoAtual.mesFinalCiclo === 1) ? 'selected="selected"' : '') %>>Janeiro</option>
								<option value="2" <%- ((infoAtual.mesFinalCiclo === 2) ? 'selected="selected"' : '') %>>Fevereiro</option>
								<option value="3" <%- ((infoAtual.mesFinalCiclo === 3) ? 'selected="selected"' : '') %>>Março</option>
								<option value="4" <%- ((infoAtual.mesFinalCiclo === 4) ? 'selected="selected"' : '') %>>Abril</option>
								<option value="5" <%- ((infoAtual.mesFinalCiclo === 5) ? 'selected="selected"' : '') %>>Maio</option>
								<option value="6" <%- ((infoAtual.mesFinalCiclo === 6) ? 'selected="selected"' : '') %>>Junho</option>
								<option value="7" <%- ((infoAtual.mesFinalCiclo === 7) ? 'selected="selected"' : '') %>>Julho</option>
								<option value="8" <%- ((infoAtual.mesFinalCiclo === 8) ? 'selected="selected"' : '') %>>Agosto</option>
								<option value="9" <%- ((infoAtual.mesFinalCiclo === 9) ? 'selected="selected"' : '') %>>Setembro</option>
								<option value="10" <%- ((infoAtual.mesFinalCiclo === 10) ? 'selected="selected"' : '') %>>Outubro</option>
								<option value="11" <%- ((infoAtual.mesFinalCiclo === 11) ? 'selected="selected"' : '') %>>Novembro</option>
								<option value="12" <%- ((infoAtual.mesFinalCiclo === 12) ? 'selected="selected"' : '') %>>Dezembro</option>
							</select>
						</div>
					</div>

					<div class="col-xs-6">
						<div class="form-group">
							<label for="anoFinalCiclo">Ano Final</label>
							<input type="number" id="anoFinalCiclo" name="anoFinalCiclo" class="form-control" value="<%- infoAtual.anoFinalCiclo %>" />
						</div>
					</div>
				</div>

			</div>

			<div class="panel-footer">
				<input value="Atualizar Ciclo Atual" class="btn btn-primary btn-lg btn-block" type="submit" />
			</div>
		</form>

		
	</div>
</div>

<%- contentFor("scripts") %>
<script type="text/javascript">
	//<![CDATA[
	"use strict";

	$("#form").validate({
		rules: {
			cicloAtual: {
				required: true
			},
			mesInicialCiclo: {
				required: true
			},
			anoInicialCiclo: {
				required: true
			},
			mesFinalCiclo: {
				required: true
			},
			anoFinalCiclo: {
				required: true
			}
		},

		submitHandler: function (form) {
			if (JsonWebApi.active)
				return;

			Notification.wait();

			JsonWebApi.postFormData("<%- root %>/api/dayOff/atualizarCicloAtual", form, function (response) {
				if (response.success)
					Notification.success("Ciclo atualizado com sucesso! " + emoji.happy);
				else
					Notification.error(response.value + " " + emoji.sad, true);
			});
		}
	});
	//]]>
</script>
